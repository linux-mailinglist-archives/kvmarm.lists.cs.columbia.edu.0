Return-Path: <kvmarm-bounces@lists.cs.columbia.edu>
X-Original-To: lists+kvmarm@lfdr.de
Delivered-To: lists+kvmarm@lfdr.de
Received: from mm01.cs.columbia.edu (mm01.cs.columbia.edu [128.59.11.253])
	by mail.lfdr.de (Postfix) with ESMTP id B8FE24209B1
	for <lists+kvmarm@lfdr.de>; Mon,  4 Oct 2021 13:02:44 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by mm01.cs.columbia.edu (Postfix) with ESMTP id 469AC4B26F;
	Mon,  4 Oct 2021 07:02:44 -0400 (EDT)
X-Virus-Scanned: at lists.cs.columbia.edu
X-Spam-Flag: NO
X-Spam-Score: -4.201
X-Spam-Level: 
X-Spam-Status: No, score=-4.201 required=6.1 tests=[BAYES_00=-1.9,
	DNS_FROM_AHBL_RHSBL=2.699, RCVD_IN_DNSWL_HI=-5] autolearn=unavailable
Received: from mm01.cs.columbia.edu ([127.0.0.1])
	by localhost (mm01.cs.columbia.edu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FkaZScjqtZK8; Mon,  4 Oct 2021 07:02:44 -0400 (EDT)
Received: from mm01.cs.columbia.edu (localhost [127.0.0.1])
	by mm01.cs.columbia.edu (Postfix) with ESMTP id E7EFC4B26B;
	Mon,  4 Oct 2021 07:02:42 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
 by mm01.cs.columbia.edu (Postfix) with ESMTP id 4704F4B250
 for <kvmarm@lists.cs.columbia.edu>; Mon,  4 Oct 2021 07:02:41 -0400 (EDT)
X-Virus-Scanned: at lists.cs.columbia.edu
Received: from mm01.cs.columbia.edu ([127.0.0.1])
 by localhost (mm01.cs.columbia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id zKmIzzu+Ct5v for <kvmarm@lists.cs.columbia.edu>;
 Mon,  4 Oct 2021 07:02:40 -0400 (EDT)
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by mm01.cs.columbia.edu (Postfix) with ESMTPS id 1C2724B24A
 for <kvmarm@lists.cs.columbia.edu>; Mon,  4 Oct 2021 07:02:40 -0400 (EDT)
Received: from disco-boy.misterjones.org (disco-boy.misterjones.org
 [51.254.78.96])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 164CF6124D;
 Mon,  4 Oct 2021 11:02:39 +0000 (UTC)
Received: from sofa.misterjones.org ([185.219.108.64] helo=why.misterjones.org)
 by disco-boy.misterjones.org with esmtpsa (TLS1.3) tls
 TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (Exim 4.94.2)
 (envelope-from <maz@kernel.org>)
 id 1mXLjw-00Eb2j-Vh; Mon, 04 Oct 2021 12:02:37 +0100
Date: Mon, 04 Oct 2021 12:02:36 +0100
Message-ID: <875yudrr1v.wl-maz@kernel.org>
From: Marc Zyngier <maz@kernel.org>
To: Lukas =?UTF-8?B?SsO8bmdlcg==?= <lukas.juenger@ice.rwth-aachen.de>
Subject: Re: KVM userspace GICv2 IRQ controller on platform with GICv3
In-Reply-To: <90101279-8099-7a77-bf73-5c8bdce2d51b@ice.rwth-aachen.de>
References: <c3cff3de-61f6-0e19-6825-02c934dfbb76@ice.rwth-aachen.de>
 <877detrstj.wl-maz@kernel.org>
 <90101279-8099-7a77-bf73-5c8bdce2d51b@ice.rwth-aachen.de>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/27.1
 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: lukas.juenger@ice.rwth-aachen.de,
 kvmarm@lists.cs.columbia.edu, will@kernel.org, catalin.marinas@arm.com
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org);
 SAEximRunCond expanded to false
Cc: catalin.marinas@arm.com, will@kernel.org, kvmarm@lists.cs.columbia.edu
X-BeenThere: kvmarm@lists.cs.columbia.edu
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Where KVM/ARM decisions are made <kvmarm.lists.cs.columbia.edu>
List-Unsubscribe: <https://lists.cs.columbia.edu/mailman/options/kvmarm>,
 <mailto:kvmarm-request@lists.cs.columbia.edu?subject=unsubscribe>
List-Archive: <https://lists.cs.columbia.edu/pipermail/kvmarm>
List-Post: <mailto:kvmarm@lists.cs.columbia.edu>
List-Help: <mailto:kvmarm-request@lists.cs.columbia.edu?subject=help>
List-Subscribe: <https://lists.cs.columbia.edu/mailman/listinfo/kvmarm>,
 <mailto:kvmarm-request@lists.cs.columbia.edu?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: kvmarm-bounces@lists.cs.columbia.edu
Sender: kvmarm-bounces@lists.cs.columbia.edu

T24gTW9uLCAwNCBPY3QgMjAyMSAxMTozMDowNiArMDEwMCwKTHVrYXMgSsO8bmdlciA8bHVrYXMu
anVlbmdlckBpY2Uucnd0aC1hYWNoZW4uZGU+IHdyb3RlOgo+IAo+IFsxICA8dGV4dC9wbGFpbiAo
ZW4tVVMpOyB1dGYtOCAocXVvdGVkLXByaW50YWJsZSk+XQo+IE9uIDA0LjEwLjIxIDEyOjI0LCBN
YXJjIFp5bmdpZXIgd3JvdGU6Cj4gPiBIaSBMdWthcywKPiAKPiBIaSBNYXJrLAo+IAo+IFRoYW5r
cyBmb3IgeW91ciBxdWljayByZXBseS4KPiAKPiA+IE9uIE1vbiwgMDQgT2N0IDIwMjEgMTE6MDc6
NDcgKzAxMDAsCj4gPiBMdWthcyBKw7xuZ2VyIDxsdWthcy5qdWVuZ2VyQGljZS5yd3RoLWFhY2hl
bi5kZT4gd3JvdGU6Cj4gPj4gSGVsbG8sCj4gPj4gCj4gPj4gSSBhbSB0cnlpbmcgdG8gcnVuIGFu
IGVtdWxhdG9yIHRoYXQgdXNlcyBLVk0gb24gYXJtNjQgdG8gZXhlY3V0ZQo+ID4+IGNvZGUuIFRo
ZSBlbXVsYXRvciBjb250YWlucyBhIHVzZXJzcGFjZSBtb2RlbCBvZiBhIEdJQ3YyIElSUQo+ID4+
IGNvbnRyb2xsZXIuIFRoZSBwbGF0Zm9ybSB0aGF0IEkgYW0gcnVubmluZyBvbiAobjFzZHApIGhh
cyBhCj4gPiBOMS1TRFA/IE15IGNvbmRvbGVuY2VzLi4uCj4gSXMgdGhlcmUgbW9yZSB0byB0aGlz
PwoKSG93IGRvIHlvdSBsaWtlIHRoZSBQQ0kgcGF0Y2hlcz8gOkQKCj4gPj4gR0lDdjMuIFdoZW4g
SSBib290IExpbnV4IGluIHRoZSBlbXVsYXRvciBJIHJ1biBpbnRvCj4gPj4gZ2ljX2NoZWNrX2Nw
dV9mZWF0dXJlcygpwqAgaW4gZHJpdmVycy9pcnFjaGlwL2lycS1naWMuYywgd2hpY2ggdGFpbnRz
Cj4gPj4gdGhlIGtlcm5lbCBhcyB0aGUgaG9zdCB1c2VzIHN5c3RlbSByZWdpc3RlcnMgdG8gY29t
bXVuaWNhdGUgd2l0aCB0aGUKPiA+PiBob3N0IEdJQ3YzLiBJIHNhdyB0aGF0IElDQ19TUkVfRUx4
IGNhbiBiZSB1c2VkIHRvIGZvcmNlIE1NSU8sIGJ1dAo+ID4+IHNldHRpbmcgdGhpcyBmcm9tIGlu
c2lkZSB0aGUgVk0gZGlkIG5vdCB3b3JrIGFuZCB1c2luZyBLVk1fU0VUX09ORV9SRUcKPiA+PiBm
YWlsZWQgd2l0aCBlcnJvci4KPiA+IE4xLVNEUCBkb2Vzbid0IGltcGxlbWVudCB0aGUgTU1JTyBp
bnRlcmZhY2UgYXQgYWxsLCBhbmQgb3VyIEdJQwo+ID4gZW11bGF0aW9uIGRvZXNuJ3QgZWl0aGVy
LiBCb3RoIGFyZSB2YWxpZCBpbXBsZW1lbnRhdGlvbnMuCj4gPiAKPiA+PiBJcyB0aGVyZSBhIHdh
eSB0byB1c2UgYSB1c2Vyc3BhY2UgR0lDdjIgbW9kZWwgd2l0aCBLVk0gb24gYSBHSUN2MyBob3N0
Cj4gPj4gd2l0aG91dCB0YWludGluZz8KPiA+IFRoZSB0YWludGluZyBoYXBwZW5zIGJlY2F1c2Ug
eW91IGhhdmUgY3JlYXRlZCBhIFZNIHdpdGggYSBHSUN2Mwo+ID4gaXJxY2hpcCAoYXQgc29tZSBw
b2ludCwgeW91ciBWTU0gY2FsbHMgaW50byBLVk0gdG8gY3JlYXRlIGEgZGV2aWNlCj4gPiB3aXRo
IHRoZSBLVk1fREVWX1RZUEVfQVJNX1ZHSUNfVjMgYXR0cmlidXRlKS4gVGhlIGd1ZXN0IHRoZW4g
c2VlcyB0aGF0Cj4gPiBHSUN2MyBpcyBlbmFibGVkIChJQ0NfU1JFX0VMeC5TUkU9PTEpLCBhbmQg
eWV0IHlvdSBzb21laG93IGV4cG9zZSBhCj4gPiBHSUN2MiB0byB0aGUgZ3Vlc3QgKGVpdGhlciB2
aWEgRFQgb3IgQUNQSSkuIFRoYXQncyBpbGxlZ2FsLgo+ID4gCj4gPiBJZiB5b3Ugd2FudCBhIHVz
ZXJzcGFjZSBpbnRlcnJ1cHQgY29udHJvbGxlciwgeW91IG5lZWQgcHJldmVudCB0aGUKPiA+IGNy
ZWF0aW9uIG9mIGFuIGluLWtlcm5lbCBpbnRlcnJ1cHQgY29udHJvbGxlciwgd2hpY2ggaXMgYSBj
aGFuZ2UgaW4KPiA+IHlvdXIgVk1NIG9yIG1heWJlIGEgY29uZmlndXJhdGlvbiBjaGFuZ2UuCj4g
SSdtIG5vdCB1c2luZyBhbiBpbi1rZXJuZWwgaXJxIGNvbnRyb2xsZXIsIGF0IGxlYXN0IEkgZG9u
J3Qgc2V0IG9uZQo+IHVwLiBUaGlzIGlzIGFsbCBjdXN0b20sIHNvIG5vIFFFTVUgZXRjLiBUaGUg
R0lDdjIgaXMgYWxzbyBhIGN1c3RvbQo+IG1vZGVsIHRoYXQgbGl2ZXMgaW4gdXNlciBzcGFjZS4g
VGhlIGd1ZXN0IGdldHMgYSBEVCB0ZWxsaW5nIGl0IHRoYXQKPiB0aGVyZSBpcyBhIEdJQ3YyIGFu
ZCBpdCBzaG91bGQgYWNjZXNzIGl0IHZpYSBNTUlPLiBUaGlzIGFsbCB1c2VkIHRvCj4gd29yayBv
biBSYXNwYmVycnkgUGkgMwoKUlBJMyBkb2Vzbid0IGhhdmUgYSBHSUMgYXQgYWxsLCBzbyB0aGUg
ZXhhbXBsZSBpcyBhIGJpdCBtb290LgoKPiBhbmQgU29jaW9uZXh0IFN5bnF1YWNlci4KClRoaXMg
b25lIGhvd2V2ZXIgaXMgbW9yZSBpbnRlcmVzdGluZywgYXMgaXQgaGFzIGEgR0lDdjMgKyB2MiBj
b21wYXQuCgo+IFRoZSBwb3J0IHRvIE4xLVNEUCBpcwo+IGdpdmluZyBtZSB0cm91YmxlLiBJIHVu
ZGVyc3RhbmQgd2h5IGl0IGlzIHRhaW50aW5nIHRoZSBrZXJuZWwsIEkgd2FzCj4ganVzdCB3b25k
ZXJpbmcgaWYgSSBjb3VsZCBzb21laG93IHRlbGwgS1ZNIHRvIHNldCB0aGlzIHVwIGNvcnJlY3Rs
eSwKPiBlLmcuIGJ5IHNldHRpbmcgdGhlIElDQ19TUkVfRUx4LgoKS1ZNIGRvZXNuJ3QgKnNldCog
SUNDX1NSRV9FTDEuU1JFLiBJdCBpcyBSQU8vV0kgb24gdGhpcyBtYWNoaW5lLCB3aGljaAppcyBw
ZXJmZWN0bHkgbGVnYWwuIEhvd2V2ZXIsIEtWTSB0cmFwcyB0aGlzIGFjY2VzcyBhbmQgZW11bGF0
ZXMgaXQKKGFjY2Vzc19naWNfc3JlKCkgcmV0dXJucyB2Y3B1LT5hcmNoLnZnaWNfY3B1LnZnaWNf
djMudmdpY19zcmUpLgoKU28gaWYgeW91IHNlZSBJQ0NfU1JFX0VMMS5TUkU9PTEgaW4geW91ciBn
dWVzdCwgdGhhdCdzIGJlY2F1c2UKdmdpY19zcmUgaXMgc2V0IHRvIHNvbWV0aGluZyB0aGF0IGlz
IG5vbi16ZXJvLiBUaGUgb25seSB3YXkgZm9yIHRoaXMKYml0IHRvIGJlIHNldCBpcyBpbiB2Z2lj
X3YzX2VuYWJsZSgpLCB3aGljaCBoYXMgdGhlIGZvbGxvd2luZyBjb2RlOgoKPHF1b3RlPgoJaWYg
KHZjcHUtPmt2bS0+YXJjaC52Z2ljLnZnaWNfbW9kZWwgPT0gS1ZNX0RFVl9UWVBFX0FSTV9WR0lD
X1YzKSB7CgkJdmdpY192My0+dmdpY19zcmUgPSAoSUNDX1NSRV9FTDFfRElCIHwKCQkJCSAgICAg
SUNDX1NSRV9FTDFfREZCIHwKCQkJCSAgICAgSUNDX1NSRV9FTDFfU1JFKTsKCQl2Y3B1LT5hcmNo
LnZnaWNfY3B1LnBlbmRiYXNlciA9IElOSVRJQUxfUEVOREJBU0VSX1ZBTFVFOwoJfSBlbHNlIHsK
CQl2Z2ljX3YzLT52Z2ljX3NyZSA9IDA7Cgl9CjwvcXVvdGU+CgpTbyBzaG9ydCBvZiBhIHRlcnJp
YmxlIGJ1ZyB0aGF0IHdvdWxkIGR1bXAgcmFuZG9tIHZhbHVlcyBpbiB0aGlzCnN0cnVjdHVyZSwg
eW91IGFyZSBzZXR0aW5nIHZnaWNfbW9kZWwgdG8gYSBHSUN2MyBpbXBsZW1lbnRhdGlvbi4gVGhp
cwpjYW4gb25seSBiZSBkb25lIGZyb20gdXNlcnNwYWNlIGlmIHlvdSBhcmUgY3JlYXRpbmcgYSBH
SUN2MyBpcnFjaGlwLgoKV2l0aG91dCBzZWVpbmcgd2hhdCB5b3VyIHVzZXJzcGFjZSBkb2VzLCBJ
J20gYWZyYWlkIEkgY2FuJ3QgaGVscCB5b3UKbXVjaCBmdXJ0aGVyLiBDYW4geW91IHBsZWFzZSBw
cm92aWRlIHNvbWUgdHJhY2VzIG9mIHdoYXQgaXQgZG9lcz8gQQpzdHJhY2UgZHVtcCB3b3VsZCBj
ZXJ0YWlubHkgaGVscC4KClRoYW5rcywKCglNLgoKLS0gCldpdGhvdXQgZGV2aWF0aW9uIGZyb20g
dGhlIG5vcm0sIHByb2dyZXNzIGlzIG5vdCBwb3NzaWJsZS4KX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18Ka3ZtYXJtIG1haWxpbmcgbGlzdAprdm1hcm1AbGlz
dHMuY3MuY29sdW1iaWEuZWR1Cmh0dHBzOi8vbGlzdHMuY3MuY29sdW1iaWEuZWR1L21haWxtYW4v
bGlzdGluZm8va3ZtYXJtCg==
